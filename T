<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.sql.*" %>
<!DOCTYPE html>
<html>
<head>
    <title>Chỉnh sửa lý lịch cán bộ</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; }
        .container { border: 1px dashed black; width: 750px; padding: 20px; margin-top: 20px; }
        .header { background-color: #99ffff; text-align: center; padding: 5px; font-weight: bold; margin-bottom: 20px; border: 1px solid #000; }
        .section-title { font-weight: bold; margin-bottom: 10px; }
        .row { display: flex; margin-bottom: 12px; }
        .col { flex: 1; display: flex; align-items: center; }
        .label { width: 130px; font-size: 14px; }
        .value { font-weight: bold; font-size: 14px; }
        input[type="text"] { width: 200px; padding: 3px; border: 1px solid #ccc; }
        .footer { text-align: right; margin-top: 20px; }
        input[type="submit"] { padding: 5px 25px; background-color: #e1e1e1; border: 1px solid #767676; cursor: pointer; }
    </style>
</head>
<body>
<%
    String maSo = request.getParameter("id");
    if (maSo == null) {
        out.println("<script>alert('Bạn chưa đăng nhập!'); window.location.href='login.jsp';</script>");
        return;
    }

    String ten = "", gioiTinh = "", ngaySinh = "", boMon = "", noiSinh = "", danToc = "", dienCB = "";
    String chucVu = "", hocVi = "", hocHam = "", ngachLuong = "", heSo = "", phuCap = "";

    Class.forName("com.mysql.cj.jdbc.Driver");
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/qlcanbo", "root", "");
    Statement stmt = conn.createStatement();
    
    String sql = "SELECT * FROM canbo WHERE macanbo = '" + maSo + "'";
    ResultSet rs = stmt.executeQuery(sql);

    if (rs.next()) {
        ten = rs.getString("tencanbo");
        gioiTinh = rs.getString("gioitinh");
        ngaySinh = rs.getString("ngaysinh");
        boMon = rs.getString("bomon");
        noiSinh = rs.getString("noisinh");
        danToc = rs.getString("dantoc");
        dienCB = rs.getString("diencanbo");
        chucVu = rs.getString("chucvu");
        hocVi = rs.getString("hocvi");
        hocHam = rs.getString("hocham");
        ngachLuong = rs.getString("ngachluong");
        heSo = rs.getString("heso");
        phuCap = rs.getString("phucap");
    }
%>

    <div class="container">
        <div class="header">Chỉnh sửa lý lịch cán bộ</div>
        
        <form method="POST">
            <div class="section-title">1. Lý lịch</div>
            <div class="row">
                <div class="col"><span class="label">Mã số cán bộ:</span> <span class="value"><%= maSo %></span></div>
                <div class="col"><span class="label">Tên cán bộ:</span> <span class="value"><%= ten %></span></div>
            </div>
            <div class="row">
                <div class="col"><span class="label">Giới tính:</span> <span class="value"><%= gioiTinh %></span></div>
                <div class="col"><span class="label">Ngày sinh:</span> <span class="value"><%= ngaySinh %></span></div>
            </div>
            <div class="row">
                <div class="col"><span class="label">Bộ môn:</span> <input type="text" value="<%= boMon %>"></div>
                <div class="col"><span class="label">Nơi sinh:</span> <input type="text" value="<%= noiSinh %>"></div>
            </div>
            <div class="row">
                <div class="col"><span class="label">Dân tộc:</span> <input type="text" value="<%= danToc %>"></div>
                <div class="col"><span class="label">Diện cán bộ:</span> <input type="text" value="<%= dienCB %>"></div>
            </div>

            <div class="section-title">2. Chuyên môn</div>
            <div class="row">
                <div class="col"><span class="label">Chức vụ:</span> <input type="text" value="<%= chucVu %>"></div>
                <div class="col"><span class="label">Học vị:</span> <input type="text" value="<%= hocVi %>"></div>
            </div>
            <div class="row">
                <div class="col"><span class="label">Học hàm:</span> <input type="text" value="<%= hocHam %>"></div>
                <div class="col"><span class="label">Ngạch lương:</span> <input type="text" value="<%= ngachLuong %>"></div>
            </div>
            <div class="row">
                <div class="col"><span class="label">Hệ số:</span> <input type="text" value="<%= heSo %>"></div>
                <div class="col"><span class="label">Phụ cấp:</span> <input type="text" value="<%= phuCap %>"></div>
            </div>

            <div class="footer">
                <input type="submit" value="Lưu">
            </div>
        </form>
    </div>
<%
    rs.close();
    stmt.close();
    conn.close();
%>
</body>
</html>
